import{h as i,F as r,B as k,a as B,v as x,b as E,c as V,M as h}from"./index.d030c2bc.js";import{bE as d,bU as S,bx as l,bV as j,bt as _,bF as t,bS as m}from"./vendor.72e41cd8.js";import{s as c,o as v}from"./Tag.module.eeb5779d.js";import"./vant.ec609186.js";const w=d({props:{id:Number},setup:(u,p)=>{const g=S(),e=l({id:void 0,name:"",sign:"",kind:g.query.kind.toString()}),a=l({}),b=j(),f=async s=>{s.preventDefault();const o=[{key:"name",type:"required",message:"\u5FC5\u586B"},{key:"name",type:"pattern",regex:/^.{1,4}$/,message:"\u53EA\u80FD\u586B 1 \u5230 4 \u4E2A\u5B57\u7B26"},{key:"sign",type:"required",message:"\u5FC5\u586B"}];Object.assign(a,{name:[],sign:[]}),Object.assign(a,x(e,o)),E(a)||(await(await e.id?i.patch(`/tags/${e.id}`,e,{_mock:"tagEdit",_autoLoading:!0}):i.post("/tags",e,{_mock:"tagCreate",_autoLoading:!0})).catch(y=>v(y,F=>Object.assign(a,F.errors))),b.back())};return _(async()=>{if(!u.id)return;const s=await i.get(`/tags/${u.id}`,{},{_mock:"tagShow"});Object.assign(e,s.data.resource)}),()=>t(B,{onSubmit:f},{default:()=>{var s,o;return[t(r,{label:"\u6807\u7B7E\u540D\uFF08\u6700\u591A 4 \u4E2A\u5B57\u7B26\uFF09",type:"text",modelValue:e.name,"onUpdate:modelValue":n=>e.name=n,error:(s=a.name)==null?void 0:s[0]},null),t(r,{label:"\u7B26\u53F7 "+e.sign,type:"emojiSelect",modelValue:e.sign,"onUpdate:modelValue":n=>e.sign=n,error:(o=a.sign)==null?void 0:o[0]},null),t(r,null,{default:()=>[t("p",{class:c.tips},[m("\u8BB0\u8D26\u65F6\u957F\u6309\u6807\u7B7E\u5373\u53EF\u8FDB\u884C\u7F16\u8F91")])]}),t(r,null,{default:()=>[t(k,{type:"submit",class:[c.button]},{default:()=>[m("\u786E\u5B9A")]})]})]}})}}),L=d({setup:(u,p)=>()=>t(h,null,{title:()=>"\u65B0\u5EFA\u6807\u7B7E",icon:()=>t(V,null,null),default:()=>t(w,null,null)})});export{L as TagCreate,L as default};
